---
import strapiFetch from "../../lib/strapi-fetch";
import type { Cat } from "../../interfaces/cat";
import Layout from "../../layouts/Layout.astro";
import CatCard from "../../components/CatCard.astro";
import qs from "qs";

const cats: Cat[] = await strapiFetch<Cat[]>({
  endpoint: "cats", // the content type to fetch
  wrappedByKey: "data", // the key to unwrap the response
  query: qs.stringify(
    {
      sort: "name:asc",
      fields: ["name", "description", "adopted"],
      populate: {
        tags: {
          fields: ["name"],
        },
        photos: {
          fields: ["url"],
        },
      },
    },
    {
      encodeValuesOnly: true, // prettify URL
    }
  ),
});

const pageTitle = "Nos Chats";

// console.log(query);
// console.log(JSON.stringify(cats, null, 2));
---

<Layout title={pageTitle}>
  <div class="flex flex-col w-full">
    <h1 class="text-3xl font-bold mx-auto my-6">{pageTitle}</h1>

    <div class="bg-gray-100 flex items-center justify-center">

      <!-- Container with overflow-x-auto -->
      <div class="w-96 overflow-x-auto border border-gray-300 p-4">
        <div class="flex space-x-4 whitespace-nowrap">
          <div class="w-32 bg-blue-500 text-white flex items-center justify-center">Item 1</div>
          <div class="w-32 bg-green-500 text-white flex items-center justify-center">Item 2</div>
          <div class="w-32 bg-red-500 text-white flex items-center justify-center">Item 3</div>
          <div class="w-32 bg-yellow-500 text-white flex items-center justify-center">Item 4</div>
          <div class="w-32 bg-purple-500 text-white flex items-center justify-center">Item 5</div>
          <div class="w-32 bg-pink-500 text-white flex items-center justify-center">Item 6</div>
          <div class="w-32 bg-teal-500 text-white flex items-center justify-center">Item 7</div>
        </div>
      </div>
    
    </div>
    <div class="flex flex-wrap justify-center custom-cat-card">
      {cats.map((cat) => <CatCard cat={cat} />)}
    </div>
  </div>
</Layout>

